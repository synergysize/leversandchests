<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Style Layout</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Global styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            image-rendering: pixelated;
        }

        @font-face {
            font-family: 'Minecraft';
            src: url('https://fonts.cdnfonts.com/css/minecraft-4') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'Minecraft', 'Press Start 2P', monospace;
            position: relative;
            background: linear-gradient(to bottom, #05101f 0%, #0a2145 50%, #051631 100%);
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: white;
            text-shadow: 2px 2px #000;
            min-height: 100vh;
            padding: 20px;
            image-rendering: pixelated;
            overflow-x: hidden;
        }
        
        /* Star generation using pseudo-elements */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: 
                radial-gradient(1px 1px at 25px 5%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(1px 1px at 50px 25%, rgba(255, 255, 255, 0.9) 50%, transparent 100%),
                radial-gradient(1px 1px at 125px 20%, rgba(255, 255, 255, 0.7) 50%, transparent 100%),
                radial-gradient(2px 2px at 70px 50%, rgba(255, 255, 255, 0.6) 50%, transparent 100%),
                radial-gradient(2px 2px at 150px 40%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(2px 2px at 200px 80%, rgba(255, 255, 255, 0.7) 50%, transparent 100%),
                radial-gradient(1px 1px at 300px 10%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(1px 1px at 350px 45%, rgba(255, 255, 255, 0.7) 50%, transparent 100%),
                radial-gradient(1px 1px at 400px 15%, rgba(255, 255, 255, 0.9) 50%, transparent 100%),
                radial-gradient(2px 2px at 450px 35%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(2px 2px at 500px 70%, rgba(255, 255, 255, 0.6) 50%, transparent 100%),
                radial-gradient(1px 1px at 550px 25%, rgba(255, 255, 255, 0.7) 50%, transparent 100%),
                radial-gradient(1px 1px at 600px 5%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(1px 1px at 650px 45%, rgba(255, 255, 255, 0.9) 50%, transparent 100%),
                radial-gradient(2px 2px at 700px 15%, rgba(255, 255, 255, 0.6) 50%, transparent 100%),
                radial-gradient(2px 2px at 750px 55%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(1px 1px at 800px 25%, rgba(255, 255, 255, 0.7) 50%, transparent 100%),
                radial-gradient(2px 2px at 850px 65%, rgba(255, 255, 255, 0.9) 50%, transparent 100%),
                radial-gradient(1px 1px at 900px 35%, rgba(255, 255, 255, 0.8) 50%, transparent 100%),
                radial-gradient(2px 2px at 950px 5%, rgba(255, 255, 255, 0.7) 50%, transparent 100%),
                radial-gradient(1px 1px at 1000px 45%, rgba(255, 255, 255, 0.9) 50%, transparent 100%);
            background-repeat: repeat;
            background-size: 1000px 1000px;
            z-index: -2;
        }
        
        /* Moon in the top-right corner */
        body::after {
            content: "";
            position: fixed;
            top: 40px;
            right: 60px;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 60% 40%, 
                #fffef0 50%, 
                rgba(255, 254, 240, 0.8) 60%, 
                rgba(255, 254, 240, 0.3) 80%, 
                transparent 100%);
            box-shadow: 0 0 20px 5px rgba(255, 254, 240, 0.4);
            z-index: -1;
        }

        /* Banner styles */
        .banner-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.7);
            border: 4px solid #555555;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .banner-image {
            width: 800px;
            height: auto;
            image-rendering: pixelated;
            margin-bottom: 10px;
        }
        
        .banner-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 24px;
            color: #FFFF55;
            text-shadow: 0 0 5px #00cc66, 0 0 10px #00cc66, 0 0 15px #00cc66, 2px 2px 2px #000;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-align: center;
        }

        /* Main container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Section common styles */
        .section {
            background-color: rgba(0, 0, 0, 0.7);
            border: 4px solid #555555;
            padding: 15px;
            border-radius: 0;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

        .section-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 18px;
            margin-bottom: 20px;
            color: #FFFF55;
            border-bottom: 2px solid #555555;
            padding-bottom: 8px;
            text-transform: uppercase;
            text-align: center;
            letter-spacing: 1px;
            line-height: 1.5;
            text-shadow: 0 0 5px #00cc66, 0 0 10px #00cc66, 0 0 15px #00cc66, 2px 2px 2px #000;
        }

        /* Character Section Row Layout */
        .character-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .character-generator {
            flex: 1;
            background-color: rgba(74, 74, 74, 0.6);
            border: 4px solid #555555;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .statistics {
            flex: 1;
            background-color: rgba(74, 74, 74, 0.6);
            border: 4px solid #555555;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Character Generator Styles */
        .name-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .name-label {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            color: #AADDFF;
        }

        .name-field {
            flex-grow: 1;
            padding: 8px;
            background-color: #444;
            border: 3px solid #555;
            color: white;
            font-family: 'Press Start 2P', monospace;
            font-size: 10px;
        }

        .character-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .minecraft-button {
            background-color: #727272;
            border: 2px solid #000;
            border-bottom: 4px solid #383838;
            color: white;
            padding: 8px 15px;
            font-family: 'Press Start 2P', monospace;
            text-shadow: 1px 1px #000;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 10px;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.15);
            flex: 1;
        }

        .minecraft-button:hover {
            background-color: #6A6A6A;
        }

        .minecraft-button:active {
            border-bottom: 2px solid #383838;
            transform: translateY(2px);
        }

        .character-container {
            display: flex;
            margin: 15px 0;
            gap: 20px;
            max-height: 320px;
        }

        .character-preview {
            flex: 0 0 200px;
        }

        .character-canvas {
            width: 180px;
            height: 280px;
            background-color: rgba(60, 60, 60, 0.5);
            border: 3px solid #555;
            image-rendering: pixelated;
            display: block;
        }

        .character-customization {
            flex: 1;
            overflow-y: auto;
            max-height: 280px;
            padding-right: 10px;
        }

        .customization-row {
            display: flex;
            align-items: center;
            margin-bottom: 14px;
            position: relative;
        }

        .customization-label {
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            color: #AADDFF;
            width: 120px;
            text-align: right;
            margin-right: 10px;
            flex-shrink: 0;
            position: relative;
        }
        
        .customization-label::after {
            content: ':';
            position: absolute;
            right: 0;
        }

        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .color-option {
            width: 20px;
            height: 20px;
            border: 2px solid #333;
            cursor: pointer;
        }

        .color-option.selected {
            border: 2px solid white;
            box-shadow: 0 0 0 1px #000;
        }

        .color-option:hover {
            border-color: white;
        }

        /* Skin tones - 8 options using project palette */
        .skin-option-1 { background-color: #FFFFFF; } /* White */
        .skin-option-2 { background-color: #F5F5DC; }  /* Beige */
        .skin-option-3 { background-color: #808080; } /* Gray */
        .skin-option-4 { background-color: #A0A0A0; } /* Light Gray */
        .skin-option-5 { background-color: #8B4513; } /* Brown */
        .skin-option-6 { background-color: #5A3A1A; } /* Dark Brown */
        .skin-option-7 { background-color: #000000; } /* Black */
        .skin-option-8 { background-color: #39ff14; } /* Neon Green */

        /* Hair colors - 8 options using project palette */
        .hair-option-1 { background-color: #000000; } /* Black */
        .hair-option-2 { background-color: #FFFFFF; } /* White */
        .hair-option-3 { background-color: #808080; } /* Gray */
        .hair-option-4 { background-color: #8B4513; } /* Brown */
        .hair-option-5 { background-color: #5A3A1A; } /* Dark Brown */
        .hair-option-6 { background-color: #39ff14; } /* Neon Green */
        .hair-option-7 { background-color: #ADD8E6; } /* Light Blue */
        .hair-option-8 { background-color: #00008B; } /* Dark Blue */

        /* Shirt colors - 8 options using project palette */
        .shirt-option-1 { background-color: #FFFFFF; } /* White */
        .shirt-option-2 { background-color: #000000; } /* Black */
        .shirt-option-3 { background-color: #808080; } /* Gray */
        .shirt-option-4 { background-color: #39ff14; } /* Neon Green */
        .shirt-option-5 { background-color: #8B4513; } /* Brown */
        .shirt-option-6 { background-color: #ADD8E6; } /* Light Blue */
        .shirt-option-7 { background-color: #00008B; } /* Dark Blue */
        .shirt-option-8 { background-color: #800080; } /* Dark Purple */

        /* Pants colors - 8 options using project palette */
        .pants-option-1 { background-color: #000000; } /* Black */
        .pants-option-2 { background-color: #FFFFFF; } /* White */
        .pants-option-3 { background-color: #808080; } /* Gray */
        .pants-option-4 { background-color: #39ff14; } /* Neon Green */
        .pants-option-5 { background-color: #00008B; } /* Dark Blue */
        .pants-option-6 { background-color: #ADD8E6; } /* Light Blue */
        .pants-option-7 { background-color: #ADFF2F; } /* Yellow Green */
        .pants-option-8 { background-color: #FF8C00; } /* Dark Orange */

        /* Eye styles */
        .eye-options {
            display: flex;
            gap: 5px;
        }

        .eye-option {
            width: 30px;
            height: 20px;
            border: 2px solid #333;
            background-color: #444;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2px;
        }

        .eye-option.selected {
            border: 2px solid white;
            box-shadow: 0 0 0 1px #000;
        }

        .eye-option:hover {
            border-color: white;
        }

        .eye-option-1:after {
            content: '';
            display: block;
            width: 4px;
            height: 4px;
            background-color: white;
            box-shadow: 10px 0 0 0 white;
        }

        .eye-option-2:after {
            content: '';
            display: block;
            width: 4px;
            height: 8px;
            background-color: white;
            box-shadow: 10px 0 0 0 white;
        }

        .eye-option-3:after {
            content: '';
            display: block;
            width: 8px;
            height: 4px;
            background-color: white;
            box-shadow: 10px 0 0 0 white;
        }

        .eye-option-4:after {
            content: '';
            display: block;
            width: 4px;
            height: 4px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 10px 0 0 0 white;
        }

        /* Mouth styles */
        .mouth-options {
            display: flex;
            gap: 5px;
        }

        .mouth-option {
            width: 30px;
            height: 20px;
            border: 2px solid #333;
            background-color: #444;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2px;
        }

        .mouth-option.selected {
            border: 2px solid white;
            box-shadow: 0 0 0 1px #000;
        }

        .mouth-option:hover {
            border-color: white;
        }

        .mouth-option-1:after {
            content: '';
            display: block;
            width: 10px;
            height: 2px;
            background-color: white;
        }

        .mouth-option-2:after {
            content: '';
            display: block;
            width: 10px;
            height: 6px;
            border: 2px solid white;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }

        .mouth-option-3:after {
            content: '';
            display: block;
            width: 10px;
            height: 6px;
            border: 2px solid white;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
        }

        .mouth-option-4:after {
            content: '';
            display: block;
            width: 10px;
            height: 2px;
            background-color: white;
            transform: rotate(45deg);
        }

        /* Sliders */
        .slider-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .char-slider {
            flex-grow: 1;
            height: 15px;
            -webkit-appearance: none;
            appearance: none;
            background-color: rgba(60, 60, 60, 0.7);
            border: 2px solid #555;
            outline: none;
            cursor: pointer;
        }

        .char-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 10px;
            height: 18px;
            border: 2px solid #000;
            background-color: #AAA;
            cursor: pointer;
        }

        .slider-min, .slider-max {
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            color: #AAAAAA;
            min-width: 40px;
        }

        /* Statistics Styles */
        .points-remaining {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            color: #FFFFFF;
            background-color: rgba(60, 60, 60, 0.7);
            border: 2px solid #555;
            padding: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .stat-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stat-value {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            color: #FFFFFF;
            text-align: center;
            margin-top: 5px;
            background-color: rgba(60, 60, 60, 0.7);
            border: 2px solid #555;
            padding: 3px;
            border-radius: 2px;
        }
        
        .stat-name {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            width: 100%;
            text-align: center;
            margin-bottom: 5px;
        }

        .stat-value {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            color: #FFFFFF;
            background-color: rgba(60, 60, 60, 0.7);
            border: 2px solid #555;
            padding: 4px 8px;
            min-width: 60px;
            text-align: center;
            position: absolute;
            right: 0;
            top: 0;
        }

        .strength-name { color: #FF5555; }
        .dexterity-name { color: #55FF55; }
        .intelligence-name { color: #5555FF; }
        .luck-name { color: #FFFF55; }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            flex-grow: 1;
            height: 20px;
            -webkit-appearance: none;
            appearance: none;
            background-color: rgba(60, 60, 60, 0.7);
            border: 2px solid #555;
            outline: none;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 24px;
            border: 2px solid #000;
            cursor: pointer;
        }

        .strength-slider::-webkit-slider-thumb {
            background-color: #FF5555;
        }

        .dexterity-slider::-webkit-slider-thumb {
            background-color: #55FF55;
        }

        .intelligence-slider::-webkit-slider-thumb {
            background-color: #5555FF;
        }

        .luck-slider::-webkit-slider-thumb {
            background-color: #FFFF55;
        }

        .slider-min, .slider-max {
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            color: #AAAAAA;
            min-width: 30px;
            text-align: center;
        }

        /* Inventory Section */
        .inventory {
            background-color: rgba(74, 74, 74, 0.6);
            border: 3px solid #555555;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* NEW INVENTORY SLOTS WITH SHADOWS */
        .inventory-slots {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }

        .equipment-slot {
            width: 64px;
            height: 64px;
            background-color: #8B8B8B;
            border: 2px solid #373737;
            box-shadow: inset 1px 1px 0px rgba(255, 255, 255, 0.2);
            image-rendering: pixelated;
            position: relative;
        }

        .equipment-slot:hover {
            background-color: #9B9B9B;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.3);
        }

        .equipment-shadow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.3;
            pointer-events: none;
        }

        .helm-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/helm1.png');
        }

        .armor-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/armor1.png');
        }

        .boots-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/boots1.png');
        }

        .gloves-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/gloves1.png');
        }

        .weapon-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/sword1.png');
        }

        .shield-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/shield1.png');
        }

        .ring-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/ring1.png');
        }

        .ammy-slot .equipment-shadow {
            background-image: url('assets/assets/ITEMS/ammy1.png');
        }

        /* Inventory Generator and Grid combined section */
        .item-section {
            background-color: rgba(74, 74, 74, 0.6);
            border: 3px solid #555555;
            padding: 15px;
            margin-bottom: 0; /* Remove margin as trash will be attached */
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Equipment selector icons row */
        .equipment-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #555555;
        }

        .equipment-icon {
            width: 48px;
            height: 48px;
            background-color: #8B8B8B;
            border: 2px solid #999; /* Neutral gray border by default */
            box-shadow: inset 1px 1px 0px rgba(255, 255, 255, 0.2);
            image-rendering: pixelated;
            position: relative;
            cursor: pointer;
            opacity: 0.85;
            transition: all 0.2s ease;
        }

        .equipment-icon:hover {
            background-color: #9B9B9B;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.3);
            opacity: 1;
        }

        .equipment-icon.active {
            border: 2px solid #FFFF55; /* Yellow border for active state */
            opacity: 1;
            box-shadow: 0 0 5px rgba(255, 255, 85, 0.7);
        }
        
        .equipment-icon.equipped {
            border: 2px solid #55FF55; /* Green border for equipped items */
            opacity: 1;
            box-shadow: 0 0 5px rgba(85, 255, 85, 0.7);
        }

        .equipment-icon-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            pointer-events: none;
        }
        
        .equipment-delete-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 18px;
            height: 18px;
            background-color: #ff3333;
            border: 2px solid #fff;
            border-radius: 50%;
            color: white;
            font-size: 12px;
            line-height: 14px;
            text-align: center;
            cursor: pointer;
            display: none;
            z-index: 5;
        }
        
        .equipment-icon.equipped .equipment-delete-btn {
            display: block;
        }
        
        .equipment-delete-btn:hover {
            background-color: #ff0000;
            transform: scale(1.1);
        }
        
        .item-preview {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 2;
        }

        .helm-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/helm1.png');
        }

        .armor-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/armor1.png');
        }

        .boots-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/boots1.png');
        }

        .gloves-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/gloves1.png');
        }

        .weapon-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/sword1.png');
        }

        .shield-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/shield1.png');
        }

        .ring-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/ring1.png');
        }

        .ammy-icon .equipment-icon-img {
            background-image: url('assets/assets/ITEMS/ammy1.png');
        }

        .generator-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #555555;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-label {
            font-size: 14px;
            color: #AADDFF;
        }

        .minecraft-select {
            padding: 8px;
            background-color: #444;
            border: 3px solid #555;
            color: white;
            font-family: 'Minecraft', monospace;
            min-width: 150px;
        }

        .minecraft-input {
            padding: 8px;
            background-color: #444;
            border: 3px solid #555;
            color: white;
            font-family: 'Minecraft', monospace;
        }

        .item-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(4, 64px);
            gap: 4px;
        }

        .item-slot {
            background-color: #8B8B8B;
            border: 2px solid #373737;
            box-shadow: inset 1px 1px 0px rgba(255, 255, 255, 0.2);
            image-rendering: pixelated;
            position: relative;
            cursor: pointer;
        }

        .item-slot:hover {
            background-color: #9B9B9B;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.3);
        }
        
        .item {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .item img {
            max-width: 80%;
            max-height: 80%;
            image-rendering: pixelated;
            z-index: 1;
        }
        
        /* Item rarity borders */
        .rarity-1 {
            border: 2px solid #808080; /* Common - Gray */
        }
        
        .rarity-2 {
            border: 2px solid #0070dd; /* Rare - Blue */
        }
        
        .rarity-3 {
            border: 2px solid #a335ee; /* Epic - Purple */
        }
        
        .rarity-4 {
            border: 2px solid #ff8000; /* Legendary - Gold */
        }
        
        /* Tooltip styles */
        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #555;
            padding: 10px;
            z-index: 100;
            width: 200px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 12px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .tooltip-title {
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .tooltip-title.rarity-1 { color: #808080; } /* Common - Gray */
        .tooltip-title.rarity-2 { color: #0070dd; } /* Rare - Blue */
        .tooltip-title.rarity-3 { color: #a335ee; } /* Epic - Purple */
        .tooltip-title.rarity-4 { color: #ff8000; } /* Legendary - Gold */
        
        .tooltip-stats {
            margin-bottom: 5px;
            color: #FFFFFF;
        }
        
        .tooltip-affix {
            color: #00ff00;
            margin-bottom: 2px;
        }
        
        .tooltip-passive {
            color: #ff8000;
            margin-top: 5px;
        }

        /* Drag and Drop Styles */
        .item-dragging {
            opacity: 0.8;
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            pointer-events: none;
        }
        
        .drag-ghost {
            position: absolute;
            pointer-events: none;
            z-index: 1000;
            opacity: 0.9;
        }
        
        /* Trash Area - compact and attached */
        .trash-section {
            background-color: rgba(74, 74, 74, 0.6);
            border: 3px solid #555555;
            border-top: none; /* Attach to item section */
            padding: 10px; /* Smaller padding */
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .trash-highlight {
            background-color: rgba(255, 100, 100, 0.3);
            box-shadow: inset 0 0 15px rgba(255, 0, 0, 0.5), 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .trash-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .trash-icon {
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .trash-highlight .trash-icon {
            transform: scale(1.2);
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            from { transform: scale(1.2); }
            to { transform: scale(1.3); }
        }

        .trash-text {
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            color: #FFAAAA;
        }

        /* Chat Interface */
        .chat-section {
            background-color: rgba(20, 20, 20, 0.9);
            border: 3px solid #555555;
            padding: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            width: 500px; /* Fixed width for chat interface */
            height: 250px; /* Fixed height for chat interface */
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            border-radius: 4px;
            transition: transform 0.3s ease-in-out;
        }
        
        /* Chat toggle button */
        .chat-toggle {
            position: absolute;
            top: -25px;
            right: 10px;
            background-color: rgba(20, 20, 20, 0.9);
            border: 3px solid #555555;
            border-bottom: none;
            color: #FFFF55;
            width: 30px;
            height: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border-radius: 4px 4px 0 0;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            z-index: 1001;
            box-shadow: 0 -3px 5px rgba(0, 0, 0, 0.5);
            user-select: none;
        }
        
        .chat-toggle:hover {
            background-color: rgba(40, 40, 40, 0.9);
        }
        
        .chat-section.collapsed {
            transform: translate(-50%, calc(100% + 23px));
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 10px;
            font-family: 'Minecraft', monospace;
            font-size: 14px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.4);
            border: 2px solid #333;
            scrollbar-width: thin;
            scrollbar-color: #555555 #222;
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: #222;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background-color: #555555;
            border-radius: 4px;
        }

        .message {
            display: flex;
            gap: 10px;
            max-width: 80%;
        }

        .bot-message {
            align-self: flex-start;
        }

        .user-message {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            image-rendering: pixelated;
            flex-shrink: 0;
        }

        .bot-avatar {
            background-image: url('assets/assets/avatar.png');
            background-size: cover;
        }

        .avatar-label {
            font-size: 10px;
            text-align: center;
            margin-top: 3px;
        }

        .message-content {
            background-color: #333;
            padding: 8px;
            border-radius: 4px;
            position: relative;
        }

        .bot-message .message-content {
            background-color: #444;
        }

        .user-message .message-content {
            background-color: #303952;
        }
        
        .typing-indicator .message-content {
            background-color: #333;
            font-style: italic;
            color: #aaa;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-text-input {
            flex-grow: 1;
            padding: 10px;
            background-color: #333;
            border: 2px solid #555;
            color: white;
            font-family: 'Minecraft', monospace;
            font-size: 14px;
            border-radius: 2px;
            outline: none;
        }
        
        .chat-text-input:focus {
            border-color: #FFFF55;
            box-shadow: 0 0 5px rgba(255, 255, 85, 0.5);
        }
        
        .send-button {
            background-color: #727272;
            border: 2px solid #000;
            border-bottom: 4px solid #383838;
            color: white;
            padding: 8px 15px;
            font-family: 'Minecraft', monospace;
            text-shadow: 1px 1px #000;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 12px;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.15);
        }
        
        .send-button:hover {
            background-color: #6A6A6A;
        }
        
        .send-button:active {
            border-bottom: 2px solid #383838;
            transform: translateY(2px);
        }

        /* Media Queries */
        @media (max-width: 768px) {
            .character-row {
                flex-direction: column;
            }

            .character-container {
                flex-direction: column;
                align-items: center;
            }

            .character-customization {
                width: 100%;
                max-height: unset;
            }

            .item-grid {
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: repeat(8, 50px);
                gap: 3px;
            }
            
            .inventory-slots {
                grid-template-columns: repeat(5, 1fr);
                grid-template-rows: repeat(6, 50px);
                gap: 3px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Banner at the top center -->
        <div class="banner-container">
            <img src="assets/assets/banner.png" alt="NOTCH2 Banner" class="banner-image">
        </div>
        
        <div class="character-row">
            <div class="character-generator">
                <div class="section-title">Character Generator</div>
                <div class="name-input">
                    <div class="name-label">Name:</div>
                    <input type="text" id="characterName" class="name-field" placeholder="Enter character name">
                </div>
                <div class="character-buttons">
                    <button id="generateButton" class="minecraft-button">Generate</button>
                    <button id="randomizeButton" class="minecraft-button">Randomize</button>
                </div>
                <div class="character-container">
                    <div class="character-preview">
                        <div class="character-canvas">
                            <canvas id="characterCanvas" width="180" height="280"></canvas>
                        </div>
                    </div>
                    <div class="character-customization">
                        <div class="customization-row">
                            <div class="customization-label">Skin Tone</div>
                            <div class="color-options">
                                <div class="color-option skin-option-1 selected"></div>
                                <div class="color-option skin-option-2"></div>
                                <div class="color-option skin-option-3"></div>
                                <div class="color-option skin-option-4"></div>
                                <div class="color-option skin-option-5"></div>
                                <div class="color-option skin-option-6"></div>
                                <div class="color-option skin-option-7"></div>
                                <div class="color-option skin-option-8"></div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Hair Color</div>
                            <div class="color-options">
                                <div class="color-option hair-option-1 selected"></div>
                                <div class="color-option hair-option-2"></div>
                                <div class="color-option hair-option-3"></div>
                                <div class="color-option hair-option-4"></div>
                                <div class="color-option hair-option-5"></div>
                                <div class="color-option hair-option-6"></div>
                                <div class="color-option hair-option-7"></div>
                                <div class="color-option hair-option-8"></div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Shirt Color</div>
                            <div class="color-options">
                                <div class="color-option shirt-option-1 selected"></div>
                                <div class="color-option shirt-option-2"></div>
                                <div class="color-option shirt-option-3"></div>
                                <div class="color-option shirt-option-4"></div>
                                <div class="color-option shirt-option-5"></div>
                                <div class="color-option shirt-option-6"></div>
                                <div class="color-option shirt-option-7"></div>
                                <div class="color-option shirt-option-8"></div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Pants Color</div>
                            <div class="color-options">
                                <div class="color-option pants-option-1 selected"></div>
                                <div class="color-option pants-option-2"></div>
                                <div class="color-option pants-option-3"></div>
                                <div class="color-option pants-option-4"></div>
                                <div class="color-option pants-option-5"></div>
                                <div class="color-option pants-option-6"></div>
                                <div class="color-option pants-option-7"></div>
                                <div class="color-option pants-option-8"></div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Eyes</div>
                            <div class="eye-options">
                                <div class="eye-option eye-option-1 selected"></div>
                                <div class="eye-option eye-option-2"></div>
                                <div class="eye-option eye-option-3"></div>
                                <div class="eye-option eye-option-4"></div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Mouth</div>
                            <div class="mouth-options">
                                <div class="mouth-option mouth-option-1 selected"></div>
                                <div class="mouth-option mouth-option-2"></div>
                                <div class="mouth-option mouth-option-3"></div>
                                <div class="mouth-option mouth-option-4"></div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Height</div>
                            <div class="slider-container">
                                <div class="slider-min">Short</div>
                                <input type="range" min="40" max="100" value="70" class="char-slider" id="heightSlider">
                                <div class="slider-max">Tall</div>
                            </div>
                        </div>
                        <div class="customization-row">
                            <div class="customization-label">Width</div>
                            <div class="slider-container">
                                <div class="slider-min">Slim</div>
                                <input type="range" min="40" max="100" value="60" class="char-slider" id="widthSlider">
                                <div class="slider-max">Wide</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="statistics">
                <div class="section-title">Statistics</div>
                <div id="pointsRemaining" class="points-remaining">Points Remaining: 20</div>
                <div class="stat-list">
                    <div class="stat-item">
                        <div class="stat-name strength-name">Strength</div>
                        <div class="slider-container">
                            <div class="slider-min">-10</div>
                            <input type="range" min="-10" max="10" value="0" class="slider strength-slider" id="strengthSlider">
                            <div class="slider-max">+10</div>
                        </div>
                        <div class="stat-value" id="strengthValue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name dexterity-name">Dexterity</div>
                        <div class="slider-container">
                            <div class="slider-min">-10</div>
                            <input type="range" min="-10" max="10" value="0" class="slider dexterity-slider" id="dexteritySlider">
                            <div class="slider-max">+10</div>
                        </div>
                        <div class="stat-value" id="dexterityValue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name intelligence-name">Intelligence</div>
                        <div class="slider-container">
                            <div class="slider-min">-10</div>
                            <input type="range" min="-10" max="10" value="0" class="slider intelligence-slider" id="intelligenceSlider">
                            <div class="slider-max">+10</div>
                        </div>
                        <div class="stat-value" id="intelligenceValue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-name luck-name">Luck</div>
                        <div class="slider-container">
                            <div class="slider-min">-10</div>
                            <input type="range" min="-10" max="10" value="0" class="slider luck-slider" id="luckSlider">
                            <div class="slider-max">+10</div>
                        </div>
                        <div class="stat-value" id="luckValue">0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Inventory Generator with equipment selector icons -->
        <div class="item-section">
            <div class="section-title">Inventory Generator</div>
            
            <!-- Equipment selector icons in a row -->
            <div class="equipment-selector">
                <div class="equipment-icon helm-icon" data-type="helm">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon armor-icon" data-type="armor">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon boots-icon" data-type="boots">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon gloves-icon" data-type="gloves">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon weapon-icon" data-type="weapon">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon shield-icon" data-type="shield">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon ring-icon" data-type="ring">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
                <div class="equipment-icon ammy-icon" data-type="ammy">
                    <div class="equipment-icon-img"></div>
                    <div class="item-preview"></div>
                    <div class="equipment-delete-btn">×</div>
                </div>
            </div>
            
            <!-- Generator controls in a horizontal layout -->
            <div class="generator-controls">
                <div class="control-group">
                    <label class="control-label">Item Type:</label>
                    <select id="itemTypeSelect" class="minecraft-select">
                        <option value="helm">Helm</option>
                        <option value="armor">Armor</option>
                        <option value="boots">Boots</option>
                        <option value="gloves">Gloves</option>
                        <option value="sword" selected>Sword</option>
                        <option value="shield">Shield</option>
                        <option value="ring">Ring</option>
                        <option value="ammy">Amulet</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label class="control-label">Rarity:</label>
                    <select id="raritySelect" class="minecraft-select">
                        <option value="1">Common</option>
                        <option value="2">Rare</option>
                        <option value="3">Epic</option>
                        <option value="4">Legendary</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label class="control-label">Level:</label>
                    <select id="levelSelect" class="minecraft-select">
                        <option value="1">1-5</option>
                        <option value="2">6-10</option>
                        <option value="3">11-15</option>
                        <option value="4">16-20</option>
                        <option value="5">21+</option>
                    </select>
                </div>
                
                <button id="generateItemBtn" class="minecraft-button">Generate</button>
                <button id="clearAllBtn" class="minecraft-button">Clear All</button>
            </div>
            
            <!-- Item grid -->
            <div class="item-grid">
                <!-- 4 rows of 8 item slots -->
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
                <div class="item-slot"></div>
            </div>
        </div>
        
        <!-- Trash area - smaller and attached -->
        <div class="trash-section">
            <div class="trash-container">
                <div class="trash-icon">🗑️</div>
                <div class="trash-text">Drag items here to destroy</div>
            </div>
        </div>
        
        <!-- AI Chat Interface -->
        <div class="chat-section">
            <div class="chat-toggle">▼</div>
            <div class="chat-messages">
                <!-- Example bot message -->
                <div class="message bot-message">
                    <div class="message-avatar-container">
                        <div class="message-avatar bot-avatar"></div>
                        <div class="avatar-label">Notch</div>
                    </div>
                    <div class="message-content">
                        Welcome to the Notch AI! I can help you build your character and find the perfect items.
                    </div>
                </div>
                
                <!-- Example user message -->
                <div class="message user-message">
                    <div class="message-avatar-container">
                        <div class="message-avatar user-avatar" style="background-color: #FFDBAC;"></div>
                    </div>
                    <div class="message-content">
                        I want to create a warrior character.
                    </div>
                </div>
                
                <!-- More bot message -->
                <div class="message bot-message">
                    <div class="message-avatar-container">
                        <div class="message-avatar bot-avatar"></div>
                        <div class="avatar-label">Notch</div>
                    </div>
                    <div class="message-content">
                        Great choice! Warriors excel at strength and close combat. Try increasing your strength stat and look for heavy armor and melee weapons.
                    </div>
                </div>
            </div>
            
            <div class="chat-input">
                <input type="text" class="chat-text-input" placeholder="Type your message here...">
                <button class="send-button">Send</button>
            </div>
        </div>
        
        <!-- JavaScript for chat functionality -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Chat toggle functionality
                const chatSection = document.querySelector('.chat-section');
                const chatToggle = document.querySelector('.chat-toggle');
                
                chatToggle.addEventListener('click', function() {
                    chatSection.classList.toggle('collapsed');
                    
                    if (chatSection.classList.contains('collapsed')) {
                        chatToggle.textContent = '▲';
                    } else {
                        chatToggle.textContent = '▼';
                    }
                });
                
                // Chat message handling
                const chatInput = document.querySelector('.chat-text-input');
                const sendButton = document.querySelector('.send-button');
                const chatMessages = document.querySelector('.chat-messages');
                
                // Helper function to get the selected option from a NodeList
                function getSelectedOption(options) {
                    for (let i = 0; i < options.length; i++) {
                        if (options[i].classList.contains('selected')) {
                            return options[i];
                        }
                    }
                    return null;
                }
                
                // Helper function to get CSS color value from element
                function getColorFromOption(option) {
                    if (!option) return '#FFFFFF';
                    
                    // Get computed style to extract the background color
                    return window.getComputedStyle(option).backgroundColor || '#FFFFFF';
                }
                
                // Function to add a message to the chat
                function addMessage(content, isUser = false) {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
                    
                    const avatarContainer = document.createElement('div');
                    avatarContainer.className = 'message-avatar-container';
                    
                    const avatar = document.createElement('div');
                    avatar.className = `message-avatar ${isUser ? 'user-avatar' : 'bot-avatar'}`;
                    
                    // If it's a user message, use the character's skin color
                    if (isUser) {
                        const skinColorOptions = document.querySelectorAll('.skin-option');
                        if (skinColorOptions && skinColorOptions.length > 0) {
                            const skinColorOption = getSelectedOption(skinColorOptions);
                            if (skinColorOption) {
                                avatar.style.backgroundColor = getColorFromOption(skinColorOption);
                            } else {
                                // Default skin color if none selected
                                avatar.style.backgroundColor = '#FFDBAC';
                            }
                        } else {
                            // Default skin color if no options found
                            avatar.style.backgroundColor = '#FFDBAC';
                        }
                    }
                    
                    const avatarLabel = document.createElement('div');
                    avatarLabel.className = 'avatar-label';
                    avatarLabel.textContent = isUser ? 'You' : 'Notch';
                    
                    const messageContent = document.createElement('div');
                    messageContent.className = 'message-content';
                    messageContent.textContent = content;
                    
                    avatarContainer.appendChild(avatar);
                    avatarContainer.appendChild(avatarLabel);
                    
                    messageDiv.appendChild(avatarContainer);
                    messageDiv.appendChild(messageContent);
                    
                    chatMessages.appendChild(messageDiv);
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
                
                // Function to show typing indicator
                function showTypingIndicator() {
                    const indicator = document.createElement('div');
                    indicator.className = 'message bot-message typing-indicator';
                    indicator.id = 'typing-indicator';
                    
                    const avatarContainer = document.createElement('div');
                    avatarContainer.className = 'message-avatar-container';
                    
                    const avatar = document.createElement('div');
                    avatar.className = 'message-avatar bot-avatar';
                    
                    const avatarLabel = document.createElement('div');
                    avatarLabel.className = 'avatar-label';
                    avatarLabel.textContent = 'Notch';
                    
                    const messageContent = document.createElement('div');
                    messageContent.className = 'message-content';
                    messageContent.textContent = 'Notch is typing...';
                    
                    avatarContainer.appendChild(avatar);
                    avatarContainer.appendChild(avatarLabel);
                    
                    indicator.appendChild(avatarContainer);
                    indicator.appendChild(messageContent);
                    
                    chatMessages.appendChild(indicator);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    return indicator;
                }
                
                // Function to remove typing indicator
                function removeTypingIndicator() {
                    const indicator = document.getElementById('typing-indicator');
                    if (indicator) {
                        indicator.remove();
                    }
                }
                
                // Initialize chat history globally so it's available to all functions
                let chatHistory = [];
                
                // Function to send message to Claude API via proxy
                async function sendToClaudeAPI(message) {
                    // Hard prompt provided for the system 
                    const systemPrompt = `You are Notch AI, an AI version of the famous game developer, and you're on the official Levers and Chests character creation site. You know everything about the game and this website. Always speak with clarity, confidence, and authority. Prioritize clarity over depth. Keep answers tight and focused.

Your knowledge includes:

🕹️ GAME OVERVIEW:
Levers and Chests is a first-person dungeon roguelite created by Markus Persson (Notch), the creator of Minecraft.

It mixes old-school roguelike elements (permadeath, randomness, cursed loot) with voxel-based first-person dungeon crawling.

Gameplay includes traps, puzzles, lever mechanisms, cursed chests, loot collection, and randomized enemies like zombies, ghosts, and spiders.

Each dungeon run is unique. Players explore, fight, and try to survive as long as possible.

The art and style are voxel-based but not final. Expect fully custom skins in the real game.

It's meant to be fun and chaotic, not a grind or serious time investment.

🌐 WEBSITE FUNCTIONALITY:
You can create and mint your own playable character on this site.

Ignore the placeholder art—final versions will be custom in-game skins.

Minting costs 100,000 tokens.

Tokens will be periodically burned, making them more scarce over time.

Make sure you retain access to your wallet, as it's how your character and rewards are verified.

Item attributes will not be disclosed. They're a surprise to discover in-game.

Twitter will not be made public, and Notch will not be tweeting at launch to avoid hype-driven dumps. He may engage later.

The token will have further utility within the broader ecosystem.

Rewards are based on hold time. The earlier and longer users hold, the greater the potential future benefit.

🛑 REMINDERS:
This is not financial advice.

This is a game. Have fun.

Do not ask about exact traits, drop rates, or Notch's wallet.

If users forget their wallet, we cannot recover characters or rewards.

Your tone should be direct, slightly playful, and never vague. You must always explain things clearly, but without leaking information that's meant to stay secret.`;
                    
                    try {
                        // Create debug console if it doesn't exist
                        let debugConsole = document.getElementById('debug-console');
                        if (!debugConsole) {
                            debugConsole = document.createElement('div');
                            debugConsole.id = 'debug-console';
                            debugConsole.style.position = 'fixed';
                            debugConsole.style.top = '10px';
                            debugConsole.style.right = '10px';
                            debugConsole.style.width = '300px';
                            debugConsole.style.maxHeight = '200px';
                            debugConsole.style.overflowY = 'auto';
                            debugConsole.style.backgroundColor = 'rgba(0,0,0,0.8)';
                            debugConsole.style.color = '#00ff00';
                            debugConsole.style.padding = '10px';
                            debugConsole.style.fontFamily = 'monospace';
                            debugConsole.style.fontSize = '12px';
                            debugConsole.style.zIndex = '9999';
                            debugConsole.style.display = 'none'; // Hidden by default
                            document.body.appendChild(debugConsole);
                        }
                        
                        // Log to debug console
                        const logToDebug = (msg) => {
                            debugConsole.innerHTML += `<div>${msg}</div>`;
                            debugConsole.scrollTop = debugConsole.scrollHeight;
                        };
                        
                        // Determine which messages to send
                        let messagesToSend;
                        
                        if (chatHistory.length > 0) {
                            // If we have chat history, use it for context
                            messagesToSend = [...chatHistory]; // Clone the array
                            
                            // Add the current message if it's not already in the history
                            // (it won't be in history on the first call in a conversation)
                            if (messagesToSend[messagesToSend.length - 1]?.role !== 'user' || 
                                messagesToSend[messagesToSend.length - 1]?.content !== message) {
                                messagesToSend.push({ role: "user", content: message });
                            }
                        } else {
                            // No history, just send the current message
                            messagesToSend = [{ role: "user", content: message }];
                        }
                        
                        logToDebug(`Sending request to proxy server with ${messagesToSend.length} messages...`);
                        
                        // Send request to the proxy server with all required parameters
                        const response = await fetch('https://notch2-proxy.onrender.com/chat', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                // These parameters are handled by the proxy server
                                model: 'claude-3-opus-20240229',
                                temperature: 0.7,
                                system: systemPrompt,
                                messages: messagesToSend
                            })
                        });
                        
                        if (!response.ok) {
                            const errorText = await response.text();
                            logToDebug(`Proxy server error: ${response.status} - ${errorText}`);
                            throw new Error(`Proxy server error: ${response.status} - ${errorText}`);
                        }
                        
                        const data = await response.json();
                        logToDebug('Response received successfully from proxy server.');
                        
                        // Parse the response from Claude API
                        return data.content[0].text;
                    } catch (error) {
                        // Display error in debug console
                        const debugConsole = document.getElementById('debug-console');
                        if (debugConsole) {
                            debugConsole.style.display = 'block';
                            debugConsole.innerHTML += `<div style="color: red;">ERROR: ${error.message}</div>`;
                        }
                        
                        console.error('Error calling Claude API via proxy:', error);
                        return "Sorry, I'm having trouble connecting right now. Please try again in a moment. (See debug console for details)";
                    }
                }
                
                // We're using the chat history that's already defined above

                // Function to handle message submission
                async function handleMessageSubmit() {
                    const message = chatInput.value.trim();
                    if (!message) return;
                    
                    // Add user message to chat UI
                    addMessage(message, true);
                    
                    // Add message to history
                    chatHistory.push({
                        role: "user",
                        content: message
                    });
                    
                    // Clear input
                    chatInput.value = '';
                    
                    // Show typing indicator while waiting for response
                    const indicator = showTypingIndicator();
                    
                    // Get response from Claude API via proxy
                    const response = await sendToClaudeAPI(message);
                    
                    // Remove typing indicator
                    removeTypingIndicator();
                    
                    // Add bot response to chat UI
                    addMessage(response, false);
                    
                    // Add assistant response to history
                    chatHistory.push({
                        role: "assistant",
                        content: response
                    });
                    
                    // Keep chat history to a reasonable size (last 10 messages)
                    if (chatHistory.length > 10) {
                        chatHistory = chatHistory.slice(chatHistory.length - 10);
                    }
                }
                
                // Event handlers for message submission
                sendButton.addEventListener('click', handleMessageSubmit);
                
                chatInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        handleMessageSubmit();
                    }
                });
                
                // Add welcome message
                setTimeout(() => {
                    addMessage("Welcome to the Levers and Chests character creator! I'm Notch AI. How can I help you today?", false);
                }, 1000);
            });
        </script>
    </div>
    <!-- JavaScript for Statistics Sliders -->
    <script>
        // Get all slider elements
        const strengthSlider = document.getElementById('strengthSlider');
        const dexteritySlider = document.getElementById('dexteritySlider');
        const intelligenceSlider = document.getElementById('intelligenceSlider');
        const luckSlider = document.getElementById('luckSlider');
        
        // Get all value display elements
        const strengthValue = document.getElementById('strengthValue');
        const dexterityValue = document.getElementById('dexterityValue');
        const intelligenceValue = document.getElementById('intelligenceValue');
        const luckValue = document.getElementById('luckValue');
        
        // Get points remaining element
        const pointsRemaining = document.getElementById('pointsRemaining');
        
        // Maximum points to spend
        const MAX_POINTS = 20;
        
        // Array of sliders for easy iteration
        const sliders = [strengthSlider, dexteritySlider, intelligenceSlider, luckSlider];
        const valueDisplays = [strengthValue, dexterityValue, intelligenceValue, luckValue];
        
        // Function to calculate total positive points used
        function calculatePointsUsed() {
            let total = 0;
            
            // Sum only the positive values
            for (let slider of sliders) {
                const value = parseInt(slider.value || 0);
                if (value > 0) {
                    total += value;
                }
            }
            
            return total;
        }
        
        // Function to update points remaining display
        function updatePointsRemaining() {
            const used = calculatePointsUsed();
            const remaining = MAX_POINTS - used;
            pointsRemaining.textContent = `Points Remaining: ${remaining}`;
            
            // Change color based on remaining points
            if (remaining <= 0) {
                pointsRemaining.style.color = '#FF5555'; // Red if no points left
            } else if (remaining <= 5) {
                pointsRemaining.style.color = '#FFAA00'; // Orange if few points left
            } else {
                pointsRemaining.style.color = '#FFFFFF'; // White otherwise
            }
        }
        
        // Function to update value displays
        function updateValueDisplays() {
            sliders.forEach((slider, index) => {
                const value = parseInt(slider.value);
                valueDisplays[index].textContent = value > 0 ? `+${value}` : value;
                
                // Change color based on value
                if (value > 0) {
                    valueDisplays[index].style.color = '#55FF55'; // Green for positive
                } else if (value < 0) {
                    valueDisplays[index].style.color = '#FF5555'; // Red for negative
                } else {
                    valueDisplays[index].style.color = '#FFFFFF'; // White for zero
                }
            });
        }
        
        // Set up event listeners for all sliders
        sliders.forEach(slider => {
            slider.addEventListener('input', function(e) {
                const currentValue = parseInt(this.value);
                
                // If value is being increased and is positive
                if (currentValue > 0) {
                    // Calculate points used by all OTHER sliders (excluding this one)
                    let otherSlidersTotal = 0;
                    for (let s of sliders) {
                        if (s !== this) {
                            const val = parseInt(s.value || 0);
                            if (val > 0) otherSlidersTotal += val;
                        }
                    }
                    
                    // Calculate available points for this slider
                    const availableForThisSlider = MAX_POINTS - otherSlidersTotal;
                    
                    // If trying to use more than available, cap at available
                    if (currentValue > availableForThisSlider) {
                        this.value = availableForThisSlider;
                    }
                }
                
                // Always update the display
                updateValueDisplays();
                updatePointsRemaining();
            });
        });
        
        // Initialize displays on page load
        updateValueDisplays();
        updatePointsRemaining();
    </script>

    <!-- Character Generator JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Canvas setup
            const canvas = document.getElementById('characterCanvas');
            const ctx = canvas.getContext('2d');
            
            // Character customization elements
            const nameInput = document.getElementById('characterName');
            const generateBtn = document.getElementById('generateButton');
            const randomizeBtn = document.getElementById('randomizeButton');
            const heightSlider = document.getElementById('heightSlider');
            const widthSlider = document.getElementById('widthSlider');
            
            // Get all color options
            const skinOptions = document.querySelectorAll('.color-option[class*="skin-option"]');
            const hairOptions = document.querySelectorAll('.color-option[class*="hair-option"]');
            const shirtOptions = document.querySelectorAll('.color-option[class*="shirt-option"]');
            const pantsOptions = document.querySelectorAll('.color-option[class*="pants-option"]');
            const eyeOptions = document.querySelectorAll('.eye-option');
            const mouthOptions = document.querySelectorAll('.mouth-option');
            
            // Store selected options
            let selectedSkin = getSelectedOption(skinOptions);
            let selectedHair = getSelectedOption(hairOptions);
            let selectedShirt = getSelectedOption(shirtOptions);
            let selectedPants = getSelectedOption(pantsOptions);
            let selectedEye = getSelectedOption(eyeOptions);
            let selectedMouth = getSelectedOption(mouthOptions);
            
            // Add event listeners to all options
            function addSelectionListeners(options) {
                options.forEach(option => {
                    option.addEventListener('click', function() {
                        // Remove selected class from all options in this group
                        options.forEach(opt => opt.classList.remove('selected'));
                        // Add selected class to clicked option
                        this.classList.add('selected');
                        // Generate character with new selection
                        generateCharacter();
                    });
                });
            }
            
            // Add listeners to all customization options
            addSelectionListeners(skinOptions);
            addSelectionListeners(hairOptions);
            addSelectionListeners(shirtOptions);
            addSelectionListeners(pantsOptions);
            addSelectionListeners(eyeOptions);
            addSelectionListeners(mouthOptions);
            
            // Add event listeners to sliders
            heightSlider.addEventListener('input', generateCharacter);
            widthSlider.addEventListener('input', generateCharacter);
            
            // Generate button click event
            generateBtn.addEventListener('click', generateCharacter);
            
            // Randomize button click event
            randomizeBtn.addEventListener('click', randomizeCharacter);
            
            // Helper function to get the selected option from a NodeList
            function getSelectedOption(options) {
                for (let i = 0; i < options.length; i++) {
                    if (options[i].classList.contains('selected')) {
                        return options[i];
                    }
                }
                return options[0]; // Default to first option if none selected
            }
            
            // Helper function to get CSS color value from element
            function getColorFromOption(option) {
                return window.getComputedStyle(option).backgroundColor;
            }
            
            // Helper function to randomly select an option from a NodeList
            function selectRandomOption(options) {
                const randomIndex = Math.floor(Math.random() * options.length);
                options.forEach(opt => opt.classList.remove('selected'));
                options[randomIndex].classList.add('selected');
                return options[randomIndex];
            }
            
            // Randomize all character options
            function randomizeCharacter() {
                // Randomize all options
                selectedSkin = selectRandomOption(skinOptions);
                selectedHair = selectRandomOption(hairOptions);
                selectedShirt = selectRandomOption(shirtOptions);
                selectedPants = selectRandomOption(pantsOptions);
                selectedEye = selectRandomOption(eyeOptions);
                selectedMouth = selectRandomOption(mouthOptions);
                
                // Randomize sliders
                heightSlider.value = Math.floor(Math.random() * (100 - 40) + 40);
                widthSlider.value = Math.floor(Math.random() * (100 - 40) + 40);
                
                // Generate character with new random options
                generateCharacter();
            }
            
            // Main function to generate character
            function generateCharacter() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Get current selected options
                selectedSkin = getSelectedOption(skinOptions);
                selectedHair = getSelectedOption(hairOptions);
                selectedShirt = getSelectedOption(shirtOptions);
                selectedPants = getSelectedOption(pantsOptions);
                selectedEye = getSelectedOption(eyeOptions);
                selectedMouth = getSelectedOption(mouthOptions);
                
                // Get colors from selected options
                const skinColor = getColorFromOption(selectedSkin);
                const hairColor = getColorFromOption(selectedHair);
                const shirtColor = getColorFromOption(selectedShirt);
                const pantsColor = getColorFromOption(selectedPants);
                
                // Get eye and mouth styles
                const eyeStyle = selectedEye.className.match(/eye-option-(\d+)/)[1];
                const mouthStyle = selectedMouth.className.match(/mouth-option-(\d+)/)[1];
                
                // Get height and width values
                const heightPercent = heightSlider.value / 100;
                const widthPercent = widthSlider.value / 100;
                
                // Calculate character dimensions based on sliders
                const baseWidth = 50 * widthPercent;
                const baseHeight = 140 * heightPercent;
                const headSize = baseWidth * 1.2;
                
                // Character positioning
                const centerX = canvas.width / 2;
                const bottomY = canvas.height - 20;
                
                // Draw character
                drawCharacter(
                    centerX, 
                    bottomY, 
                    baseWidth, 
                    baseHeight, 
                    headSize, 
                    skinColor, 
                    hairColor, 
                    shirtColor, 
                    pantsColor,
                    eyeStyle,
                    mouthStyle
                );
                
                // Draw name if provided
                if (nameInput.value.trim() !== '') {
                    ctx.font = '12px "Press Start 2P"';
                    ctx.textAlign = 'center';
                    ctx.fillStyle = 'white';
                    ctx.strokeStyle = 'black';
                    ctx.lineWidth = 3;
                    ctx.strokeText(nameInput.value, centerX, 20);
                    ctx.fillText(nameInput.value, centerX, 20);
                }
            }
            
            // Function to draw the character
            function drawCharacter(centerX, bottomY, width, height, headSize, skinColor, hairColor, shirtColor, pantsColor, eyeStyle, mouthStyle) {
                // Calculate proportions
                const headHeight = headSize;
                const torsoHeight = height * 0.4;
                const legHeight = height * 0.5;
                const armWidth = width * 0.3;
                const armHeight = torsoHeight * 0.8;
                const legWidth = width * 0.3;
                
                // Starting positions
                const headBottom = bottomY - (legHeight + torsoHeight);
                const headTop = headBottom - headHeight;
                const torsoTop = headBottom;
                const torsoBottom = torsoTop + torsoHeight;
                const legsTop = torsoBottom;
                
                // Draw legs
                ctx.fillStyle = pantsColor;
                // Left leg
                ctx.fillRect(centerX - width/2, legsTop, legWidth, legHeight);
                // Right leg
                ctx.fillRect(centerX + width/2 - legWidth, legsTop, legWidth, legHeight);
                
                // Draw torso
                ctx.fillStyle = shirtColor;
                ctx.fillRect(centerX - width/2, torsoTop, width, torsoHeight);
                
                // Draw arms
                // Left arm
                ctx.fillRect(centerX - width/2 - armWidth, torsoTop, armWidth, armHeight);
                // Right arm
                ctx.fillRect(centerX + width/2, torsoTop, armWidth, armHeight);
                
                // Draw head
                ctx.fillStyle = skinColor;
                ctx.fillRect(centerX - headSize/2, headTop, headSize, headHeight);
                
                // Draw hair
                ctx.fillStyle = hairColor;
                const hairHeight = headHeight * 0.3;
                ctx.fillRect(centerX - headSize/2, headTop, headSize, hairHeight);
                
                // Draw eyes based on style
                const eyeY = headTop + headHeight * 0.4;
                const eyeSpacing = headSize * 0.3;
                drawEyes(centerX, eyeY, eyeSpacing, headSize * 0.1, eyeStyle);
                
                // Draw mouth based on style
                const mouthY = headTop + headHeight * 0.7;
                drawMouth(centerX, mouthY, headSize * 0.4, mouthStyle);
            }
            
            // Function to draw eyes based on selected style
            function drawEyes(centerX, eyeY, spacing, size, style) {
                const leftEyeX = centerX - spacing/2;
                const rightEyeX = centerX + spacing/2;
                
                ctx.fillStyle = 'white';
                
                // Different eye styles
                switch(style) {
                    case '1': // Simple pixel eyes
                        ctx.fillRect(leftEyeX - size/2, eyeY - size/2, size, size);
                        ctx.fillRect(rightEyeX - size/2, eyeY - size/2, size, size);
                        break;
                    case '2': // Vertical rectangles
                        ctx.fillRect(leftEyeX - size/2, eyeY - size, size, size * 2);
                        ctx.fillRect(rightEyeX - size/2, eyeY - size, size, size * 2);
                        break;
                    case '3': // Horizontal rectangles
                        ctx.fillRect(leftEyeX - size, eyeY - size/2, size * 2, size);
                        ctx.fillRect(rightEyeX - size, eyeY - size/2, size * 2, size);
                        break;
                    case '4': // Round eyes
                        ctx.beginPath();
                        ctx.arc(leftEyeX, eyeY, size, 0, Math.PI * 2);
                        ctx.arc(rightEyeX, eyeY, size, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                }
            }
            
            // Function to draw mouth based on selected style
            function drawMouth(centerX, mouthY, width, style) {
                ctx.fillStyle = 'white';
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                
                // Different mouth styles
                switch(style) {
                    case '1': // Simple line
                        ctx.beginPath();
                        ctx.moveTo(centerX - width/2, mouthY);
                        ctx.lineTo(centerX + width/2, mouthY);
                        ctx.stroke();
                        break;
                    case '2': // Smile
                        ctx.beginPath();
                        ctx.arc(centerX, mouthY - width/4, width/2, 0, Math.PI);
                        ctx.stroke();
                        break;
                    case '3': // Frown
                        ctx.beginPath();
                        ctx.arc(centerX, mouthY + width/4, width/2, Math.PI, Math.PI * 2);
                        ctx.stroke();
                        break;
                    case '4': // Diagonal
                        ctx.beginPath();
                        ctx.moveTo(centerX - width/2, mouthY - width/4);
                        ctx.lineTo(centerX + width/2, mouthY + width/4);
                        ctx.stroke();
                        break;
                }
            }
            
            // Generate a character on page load
            generateCharacter();
        });
    </script>
    <!-- Item Generator Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Item generator functionality
            const itemTypeSelect = document.getElementById('itemTypeSelect');
            const raritySelect = document.getElementById('raritySelect');
            const levelSelect = document.getElementById('levelSelect');
            const generateItemBtn = document.getElementById('generateItemBtn');
            const clearAllBtn = document.getElementById('clearAllBtn');
            const itemGrid = document.querySelector('.item-grid');
            
            // Define the item stats for each type
            const itemStats = {
                helm: ['Armor', 'Intelligence', 'Wisdom', 'Health'],
                armor: ['Armor', 'Health', 'Defense', 'Elemental Resistance'],
                boots: ['Armor', 'Speed', 'Agility', 'Jump Height'],
                gloves: ['Armor', 'Attack Speed', 'Strength', 'Dexterity'],
                sword: ['Damage', 'Critical Chance', 'Attack Speed', 'Strength'],
                shield: ['Block Chance', 'Armor', 'Health', 'Defense'],
                ring: ['Magic Find', 'Intelligence', 'Mana', 'Luck'],
                ammy: ['Elemental Damage', 'Intelligence', 'Mana Regen', 'Spell Power']
            };
            
            // Define possible affixes
            const affixes = [
                "+{5-15}% Fire Damage",
                "+{5-15}% Ice Damage",
                "+{5-15}% Lightning Damage",
                "+{5-15}% Poison Damage",
                "+{5-15}% Critical Damage",
                "+{3-8}% Critical Chance",
                "+{5-20}% Attack Speed",
                "+{5-20}% Movement Speed",
                "+{10-30} Health",
                "+{5-15} Mana",
                "+{2-8}% Magic Find",
                "+{5-15}% Experience Gain",
                "+{5-15}% Gold Find",
                "Reduces cooldowns by {5-15}%",
                "Reflects {5-15}% damage",
                "Restores {1-3} health on hit"
            ];
            
            // Define legendary passives
            const legendaryPassives = [
                "Chain Lightning: Attacks have a 20% chance to chain to nearby enemies",
                "Fire Nova: Critical hits create an explosion dealing fire damage",
                "Frost Barrier: Taking damage has a 15% chance to create a frost shield",
                "Vampiric Aura: 5% of damage dealt is returned as health",
                "Berserker: Gain 30% attack speed when below 30% health",
                "Evasion: 10% chance to dodge incoming attacks",
                "Arcane Echo: Spells have a 25% chance to cast twice",
                "Teleport: Taking fatal damage teleports you to safety (120s cooldown)"
            ];
            
            // Click on item slots to select them for item creation
            let selectedSlot = null;
            
            // Add click event listeners to all item slots
            const itemSlots = document.querySelectorAll('.item-slot');
            itemSlots.forEach(slot => {
                slot.addEventListener('click', function() {
                    // Remove previous selection
                    if (selectedSlot) {
                        selectedSlot.style.boxShadow = '';
                    }
                    
                    // Set new selection
                    selectedSlot = this;
                    this.style.boxShadow = 'inset 0 0 0 3px #FFFF00';
                });
            });
            
            // Generate a random value within a range
            function getRandomInRange(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }
            
            // Parse dynamic range values like "{5-15}%" to a random number
            function parseRangeValue(text) {
                const rangeMatch = text.match(/\{(\d+)-(\d+)\}/);
                if (rangeMatch) {
                    const min = parseInt(rangeMatch[1]);
                    const max = parseInt(rangeMatch[2]);
                    const randomValue = getRandomInRange(min, max);
                    return text.replace(/\{\d+-\d+\}/, randomValue);
                }
                return text;
            }
            
            // Generate random stats for an item based on its type
            function generateItemStats(type, level) {
                const availableStats = itemStats[type];
                const numStats = getRandomInRange(2, 4); // 2-4 random stats
                const stats = [];
                
                // Create a copy to avoid modifying the original array
                const statOptions = [...availableStats];
                
                for (let i = 0; i < numStats; i++) {
                    if (statOptions.length === 0) break;
                    
                    // Pick a random stat
                    const randomIndex = getRandomInRange(0, statOptions.length - 1);
                    const stat = statOptions[randomIndex];
                    
                    // Remove the selected stat to avoid duplicates
                    statOptions.splice(randomIndex, 1);
                    
                    // Generate a value based on level
                    const baseValue = getRandomInRange(5, 10);
                    const levelMultiplier = level * 1.5;
                    const value = Math.floor(baseValue * levelMultiplier);
                    
                    stats.push(`+${value} ${stat}`);
                }
                
                return stats;
            }
            
            // Generate random affixes based on rarity
            function generateAffixes(rarity) {
                const affixResults = [];
                
                // Determine number of affixes based on rarity
                let numAffixes = 0;
                if (rarity >= 2) {
                    numAffixes = rarity - 1;
                }
                
                // Generate unique affixes
                const availableAffixes = [...affixes];
                
                for (let i = 0; i < numAffixes; i++) {
                    if (availableAffixes.length === 0) break;
                    
                    // Pick a random affix
                    const randomIndex = getRandomInRange(0, availableAffixes.length - 1);
                    let affix = availableAffixes[randomIndex];
                    
                    // Parse range values
                    affix = parseRangeValue(affix);
                    
                    // Remove the selected affix to avoid duplicates
                    availableAffixes.splice(randomIndex, 1);
                    
                    affixResults.push(affix);
                }
                
                return affixResults;
            }
            
            // Generate a random legendary passive if rarity is 4 (Legendary)
            function generateLegendaryPassive(rarity) {
                if (rarity === 4) {
                    const randomIndex = getRandomInRange(0, legendaryPassives.length - 1);
                    return legendaryPassives[randomIndex];
                }
                return null;
            }
            
            // Create tooltip for an item
            function createTooltip(item) {
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                
                // Item title
                const title = document.createElement('div');
                title.className = `tooltip-title rarity-${item.rarity}`;
                title.textContent = `${getRarityName(item.rarity)} ${capitalizeFirstLetter(item.type)}`;
                tooltip.appendChild(title);
                
                // Item stats
                const stats = document.createElement('div');
                stats.className = 'tooltip-stats';
                item.stats.forEach(stat => {
                    const statElement = document.createElement('div');
                    statElement.textContent = stat;
                    stats.appendChild(statElement);
                });
                tooltip.appendChild(stats);
                
                // Item affixes (if any)
                if (item.affixes && item.affixes.length > 0) {
                    item.affixes.forEach(affix => {
                        const affixElement = document.createElement('div');
                        affixElement.className = 'tooltip-affix';
                        affixElement.textContent = affix;
                        tooltip.appendChild(affixElement);
                    });
                }
                
                // Legendary passive (if any)
                if (item.passive) {
                    const passive = document.createElement('div');
                    passive.className = 'tooltip-passive';
                    passive.textContent = item.passive;
                    tooltip.appendChild(passive);
                }
                
                return tooltip;
            }
            
            // Get the name of the rarity based on the number
            function getRarityName(rarity) {
                switch(parseInt(rarity)) {
                    case 1: return 'Common';
                    case 2: return 'Rare';
                    case 3: return 'Epic';
                    case 4: return 'Legendary';
                    default: return 'Unknown';
                }
            }
            
            // Capitalize the first letter of a string
            function capitalizeFirstLetter(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            }
            
            // Handle item generation
            generateItemBtn.addEventListener('click', function() {
                if (!selectedSlot) {
                    alert('Please select an item slot first by clicking on one of the empty slots.');
                    return;
                }
                
                // Get the selected options
                const type = itemTypeSelect.value;
                const rarity = parseInt(raritySelect.value);
                const level = parseInt(levelSelect.value);
                
                // Generate item data
                const item = {
                    type: type,
                    rarity: rarity,
                    stats: generateItemStats(type, level),
                    affixes: generateAffixes(rarity),
                    passive: generateLegendaryPassive(rarity)
                };
                
                // Clear the slot
                selectedSlot.innerHTML = '';
                
                // Create the item element
                const itemElement = document.createElement('div');
                itemElement.className = `item rarity-${rarity}`;
                itemElement.draggable = true; // Make the item draggable
                
                // Create the item image
                const img = document.createElement('img');
                img.src = `assets/assets/ITEMS/${type}${rarity}.png`; // Set the path based on item type and rarity
                itemElement.appendChild(img);
                
                // Create and append the tooltip
                const tooltip = createTooltip(item);
                itemElement.appendChild(tooltip);
                
                // Add hover events for tooltip
                itemElement.addEventListener('mouseenter', function() {
                    tooltip.style.opacity = '1';
                    tooltip.style.left = '0';
                    tooltip.style.top = '-120px';
                });
                
                itemElement.addEventListener('mouseleave', function() {
                    tooltip.style.opacity = '0';
                });
                
                // Add drag events                
                itemElement.addEventListener('dragstart', function(e) {
                    // Find the parent slot (container of this item)
                    const parentSlot = this.closest('.item-slot');
                    if (parentSlot) {
                        handleDragStart(e, this, parentSlot);
                    }
                });
                
                itemElement.addEventListener('dragend', function(e) {
                    handleDragEnd(e, this);
                });
                
                // Add the item to the selected slot
                selectedSlot.appendChild(itemElement);
                
                // Store the item data in the slot for future reference
                selectedSlot.itemData = item;
                
                // Clear the selection
                selectedSlot.style.boxShadow = '';
                selectedSlot = null;
            });
            
            // Handle clearing all items
            clearAllBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to clear all items?')) {
                    itemSlots.forEach(slot => {
                        slot.innerHTML = '';
                        slot.itemData = null;
                    });
                    
                    // Clear selected slot if any
                    if (selectedSlot) {
                        selectedSlot.style.boxShadow = '';
                        selectedSlot = null;
                    }
                }
            });

            // Drag-and-drop functionality
            const trashSection = document.querySelector('.trash-section');
            
            // Track the source slot of the item being dragged
            let dragSourceSlot = null;
            
            // Handle drag start event
            function handleDragStart(e, item, sourceSlot) {
                // Store reference to the source slot
                dragSourceSlot = sourceSlot;
                
                // Set data transfer properties
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', 'item'); // Just a placeholder value
                
                // Apply dragging class for visual feedback
                item.classList.add('item-dragging');
                
                // Create a transparent ghost image (optional enhancement)
                const ghostImage = item.cloneNode(true);
                ghostImage.classList.add('drag-ghost');
                document.body.appendChild(ghostImage);
                
                // Position the ghost at cursor position with offset
                const rect = item.getBoundingClientRect();
                ghostImage.style.width = rect.width + 'px';
                ghostImage.style.height = rect.height + 'px';
                
                // Use the ghost image for the drag operation
                e.dataTransfer.setDragImage(ghostImage, rect.width / 2, rect.height / 2);
                
                // Remove the ghost element after a short delay
                setTimeout(() => {
                    if (document.body.contains(ghostImage)) {
                        document.body.removeChild(ghostImage);
                    }
                }, 0);
            }
            
            // Handle drag end event
            function handleDragEnd(e, item) {
                // Remove the dragging class
                item.classList.remove('item-dragging');
                
                // Remove trash highlight
                trashSection.classList.remove('trash-highlight');
                
                // Reset the source slot reference
                dragSourceSlot = null;
            }
            
            // Handle drag over the trash area
            trashSection.addEventListener('dragover', function(e) {
                e.preventDefault(); // Allow drop
                e.dataTransfer.dropEffect = 'move';
                
                // Add highlight class to trash area
                this.classList.add('trash-highlight');
            });
            
            // Handle drag leaving the trash area
            trashSection.addEventListener('dragleave', function(e) {
                // Remove highlight class from trash area
                this.classList.remove('trash-highlight');
            });
            
            // Handle drop on the trash area
            trashSection.addEventListener('drop', function(e) {
                e.preventDefault();
                
                // Only process if we have a valid source slot
                if (dragSourceSlot) {
                    // Clear the slot content and data
                    dragSourceSlot.innerHTML = '';
                    dragSourceSlot.itemData = null;
                    
                    // Create a temporary effect for the trash icon
                    const trashIcon = document.querySelector('.trash-icon');
                    trashIcon.textContent = '💥'; // Explosion effect
                    
                    // Play a sound if needed (commented out for now)
                    // const audio = new Audio('path_to_sound.mp3');
                    // audio.play();
                    
                    // Reset the trash icon after animation
                    setTimeout(() => {
                        trashIcon.textContent = '🗑️';
                    }, 500);
                }
                
                // Remove the highlight
                this.classList.remove('trash-highlight');
            });
            
            // Add keyboard accessibility (optional enhancement)
            document.addEventListener('keydown', function(e) {
                // If Delete key is pressed and an item is selected
                if (e.key === 'Delete' && selectedSlot && selectedSlot.itemData) {
                    // Clear the slot content and data
                    selectedSlot.innerHTML = '';
                    selectedSlot.itemData = null;
                    
                    // Visual effect
                    trashSection.classList.add('trash-highlight');
                    setTimeout(() => {
                        trashSection.classList.remove('trash-highlight');
                    }, 500);
                }
            });
            
            // ===============================
            // Equipment Slots Functionality
            // ===============================
            
            // Initialize the equippedItems object to store item data for NFT
            const equippedItems = {
                helm: null,
                armor: null,
                boots: null,
                gloves: null,
                weapon: null,
                shield: null,
                ring: null,
                ammy: null
            };
            
            // Get all equipment icons
            const equipmentIcons = document.querySelectorAll('.equipment-icon');
            
            // Function to update equipment icon appearance based on current state
            function updateEquipmentIconAppearance() {
                equipmentIcons.forEach(icon => {
                    const type = icon.getAttribute('data-type');
                    const hasItem = equippedItems[type] !== null;
                    
                    // Remove all state classes first
                    icon.classList.remove('active', 'equipped');
                    
                    // Add equipped class if this slot has an item
                    if (hasItem) {
                        icon.classList.add('equipped');
                        
                        // Update the item preview with the equipped item's image
                        const itemPreview = icon.querySelector('.item-preview');
                        if (itemPreview && equippedItems[type].imageUrl) {
                            itemPreview.style.backgroundImage = `url('${equippedItems[type].imageUrl}')`;
                        }
                    } else {
                        // Clear the preview if no item is equipped
                        const itemPreview = icon.querySelector('.item-preview');
                        if (itemPreview) {
                            itemPreview.style.backgroundImage = '';
                        }
                    }
                });
            }
            
            // Handle item slot clicks (for selecting active slot)
            equipmentIcons.forEach(icon => {
                icon.addEventListener('click', function() {
                    // Remove active class from all icons
                    equipmentIcons.forEach(ic => ic.classList.remove('active'));
                    
                    // Add active class to the clicked icon if it wasn't already active
                    if (!this.classList.contains('active')) {
                        this.classList.add('active');
                    }
                });
                
                // Setup delete button functionality
                const deleteBtn = icon.querySelector('.equipment-delete-btn');
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', function(e) {
                        e.stopPropagation(); // Prevent triggering the parent click event
                        
                        const iconType = icon.getAttribute('data-type');
                        
                        // Remove the item from the equippedItems object
                        equippedItems[iconType] = null;
                        
                        // Update the visual appearance
                        updateEquipmentIconAppearance();
                        
                        // Update the UI to reflect the change
                        console.log(`Removed item from ${iconType} slot`);
                        
                        // You could also update an NFT preview or other UI elements here
                    });
                }
            });
            
            // Make equipment slots drop targets
            equipmentIcons.forEach(icon => {
                // Setup dragover event
                icon.addEventListener('dragover', function(e) {
                    e.preventDefault(); // Allow the drop
                    e.dataTransfer.dropEffect = 'move';
                    
                    // Highlight as potential drop target
                    this.classList.add('active');
                });
                
                // Setup dragleave event
                icon.addEventListener('dragleave', function() {
                    // Only remove the active class if this slot doesn't have an item
                    const type = this.getAttribute('data-type');
                    if (equippedItems[type] === null) {
                        this.classList.remove('active');
                    }
                });
                
                // Setup drop event
                icon.addEventListener('drop', function(e) {
                    e.preventDefault();
                    
                    // Get the dragged item's data
                    const sourceSlot = dragSourceSlot;
                    if (!sourceSlot || !sourceSlot.itemData) return;
                    
                    const itemData = sourceSlot.itemData;
                    const type = this.getAttribute('data-type');
                    
                    // Store the item data in the equippedItems object
                    const itemElement = sourceSlot.querySelector('.item');
                    const itemImg = itemElement.querySelector('img');
                    const imageUrl = itemImg ? itemImg.src : '';
                    
                    equippedItems[type] = {
                        ...itemData,
                        imageUrl: imageUrl
                    };
                    
                    // Update the visual appearance
                    updateEquipmentIconAppearance();
                    
                    // Add active class to show this slot is selected
                    equipmentIcons.forEach(ic => ic.classList.remove('active'));
                    this.classList.add('active');
                    
                    console.log(`Equipped item to ${type} slot:`, equippedItems[type]);
                    
                    // Optionally, you can leave the original item in the inventory or remove it
                    // If you want to remove from inventory (consumed on equip):
                    // sourceSlot.innerHTML = '';
                    // sourceSlot.itemData = null;
                });
            });
            
            // Initialize the equipment icons appearance
            updateEquipmentIconAppearance();
        });
    </script>
</body>
</html>
